(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{15:function(t,n,e){"use strict";e.d(n,"l",(function(){return g})),e.d(n,"n",(function(){return y})),e.d(n,"k",(function(){return J})),e.d(n,"j",(function(){return j})),e.d(n,"e",(function(){return w})),e.d(n,"a",(function(){return O})),e.d(n,"d",(function(){return _})),e.d(n,"b",(function(){return R})),e.d(n,"g",(function(){return x})),e.d(n,"c",(function(){return k})),e.d(n,"h",(function(){return z})),e.d(n,"o",(function(){return B})),e.d(n,"f",(function(){return D})),e.d(n,"s",(function(){return H})),e.d(n,"r",(function(){return I})),e.d(n,"w",(function(){return T})),e.d(n,"y",(function(){return A})),e.d(n,"p",(function(){return M})),e.d(n,"u",(function(){return U})),e.d(n,"q",(function(){return C})),e.d(n,"v",(function(){return P})),e.d(n,"t",(function(){return E})),e.d(n,"x",(function(){return S})),e.d(n,"i",(function(){return L})),e.d(n,"m",(function(){return d}));var r=e(8),u=e.n(r),o=e(14),a=e(12),c=e(23),i=e(13);function s(t){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(u.a.mark((function t(n){var e,r,i,s,l,d,f,p,m=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.length>1&&void 0!==m[1]?m[1]:{},r=e.data,i=e.type,s=e.headers,l=Object(c.a)(e,["data","type","headers"]),d=window.localStorage.getItem("CHURCH_CRM"),f=i?Object(a.a)({Authorization:d?"Bearer ".concat(d):void 0},s):Object(a.a)({Authorization:d?"Bearer ".concat(d):void 0,"Content-Type":r?"application/json":void 0},s),p={method:r?"POST":"GET",body:r&&!i?JSON.stringify(r):r&&i?r:void 0,headers:l.customHeaders?l.customHeaders:f},console.log(" config ",p),t.abrupt("return",window.fetch("".concat(n),p).then(function(){var t=Object(o.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.json();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()).catch((function(t){})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){i.b.clear(),window.localStorage.removeItem("CHURCH_CRM")}var f="http://localhost:8000/api",p="".concat("http://localhost:8000/api/auth","/login"),m=e(31),v=e.n(m);function h(t){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function t(n){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("data ",n),window.localStorage.setItem("CHURCH_CRM",n.token),t.next=4,j();case 4:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){var n=t.email,e=t.password;return s(p,{data:{email:n,password:e}}).then(h)}function y(t){return s("register",{data:{username:t.username,password:t.password}}).then(h)}function j(){var t=N();return t?s("".concat(f,"/auth/user"),{data:{token:t}}).then((function(t){return console.log("GET_USER ",t),"success"===t.status?t.user:(v.a.error(t.error),window.localStorage.clear(),null)})):Promise.resolve(null)}function w(t){return N()?s("".concat(f,"/products/category?page=").concat(t)).then((function(t){return t})):Promise.resolve(null)}function O(t){return N()?s("".concat(f,"/products/category/create"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function C(t){return N()?s("".concat(f,"/products/category/update"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function P(t){return N()?s("".concat(f,"/products/upload-category-csv"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function k(t){return N()?s("".concat(f,"/products/product-type/create"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function x(){return N()?s("".concat(f,"/products/product-type")).then((function(t){return t})):Promise.resolve(null)}function E(t){return N()?s("".concat(f,"/products/product-type/update"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function S(t){return N()?s("".concat(f,"/products/upload-product-type-csv"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function R(t){return N()?s("".concat(f,"/products/create"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function H(t){return N()?s("".concat(f,"/products/update"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function I(t){return N()?s("".concat(f,"/products/update-image"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function T(t){return N()?s("".concat(f,"/products/upload-product-csv"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function A(t){return N()?s("".concat(f,"/products/upload-variant-csv"),{data:t,type:"image"}).then((function(t){return t})):Promise.resolve(null)}function M(t){return N()?s("".concat(f,"/products/delete-variant"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function U(t){return N()?s("".concat(f,"/products/update-variant"),{data:t}).then((function(t){return t})):Promise.resolve(null)}function z(t){return N()?s("".concat(f,"/products?page=").concat(t)).then((function(t){return t})):Promise.resolve(null)}function B(t){return N()?(console.log(t),s("".concat(f,"/products/delete"),{data:t}).then((function(t){return t}))):Promise.resolve(null)}function D(t){return N()?s("".concat(f,"/products/get/").concat(t)).then((function(t){return t})):Promise.resolve(null)}function _(){return N()?s("".concat(f,"/users/all-users")).then((function(t){return t})):Promise.resolve(null)}function L(){return N()?s("".concat(f,"/registrations")).then((function(t){return t})):Promise.resolve(null)}function N(){var t=window.localStorage.getItem("CHURCH_CRM");return t||null}function J(){return Boolean(N())}},16:function(t,n,e){"use strict";e.d(n,"b",(function(){return f})),e.d(n,"a",(function(){return d})),e.d(n,"c",(function(){return i})),e.d(n,"d",(function(){return s}));var r=e(23),u=e(17),o=e(3),a=(e(32),e(43),e(44));var c=Object(o.e)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});Object(u.a)(a.a,{target:"eyp5yn80"})({animation:"".concat(c," 1s linear infinite")},"").defaultProps={"aria-label":"loading"};Object(u.a)("div",{target:"eyp5yn82"})({name:"j7qwjs",styles:"display:flex;flex-direction:column;"});function i(){return Object(o.d)("div",{css:{fontSize:"4em",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Object(o.d)("div",{className:"spinner-border avatar-lg text-primary m-2",role:"status"}))}function s(){return Object(o.d)("div",{css:{fontSize:"4em",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Object(o.d)("div",{className:"spinner-border loader-border text-primary m-2",role:"status"}))}var l={stacked:{display:"block"},inline:{display:"inline-block"}};function d(t){var n=t.error,e=t.variant,u=void 0===e?"stacked":e,a=Object(r.a)(t,["error","variant"]);return Object(o.d)("div",Object.assign({role:"alert",css:[{color:"red"},l[u]]},a),Object(o.d)("span",null,"There was an error: "),Object(o.d)("pre",{css:[{whiteSpace:"break-spaces",margin:"0",marginBottom:-5},l[u]]},n.message))}function f(t){var n=t.error;return Object(o.d)("div",{role:"alert",css:{color:"red",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Object(o.d)("p",null,"Uh oh... There's a problem. Try refreshing the app."),Object(o.d)("pre",null,n.message))}},18:function(t,n,e){"use strict";e.d(n,"a",(function(){return g})),e.d(n,"b",(function(){return y}));var r=e(3),u=e(0),o=e.n(u),a=e(8),c=e.n(a),i=e(14),s=e(13),l=e(15);function d(){return(d=Object(i.a)(c.a.mark((function t(){var n,e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={user:null},!l.k()){t.next=6;break}return t.next=4,Promise.all([l.j()]);case 4:e=t.sent,n={user:e};case 6:return s.b.setQueryData("get-users",n),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=e(29),p=e(12);var m={status:"idle",data:null,error:null};function v(t){var n=o.a.useRef(Object(p.a)(Object(p.a)({},m),t)),e=o.a.useReducer((function(t,n){return Object(p.a)(Object(p.a)({},t),n)}),n.current),r=Object(f.a)(e,2),u=r[0],a=u.status,c=u.data,i=u.error,s=function(t){var n=o.a.useRef(!1);return o.a.useLayoutEffect((function(){return n.current=!0,function(){return n.current=!1}}),[]),o.a.useCallback((function(){return n.current?t.apply(void 0,arguments):void 0}),[t])}(r[1]),l=o.a.useCallback((function(t){return s({data:t,status:"resolved"})}),[s]),d=o.a.useCallback((function(t){return s({error:t,status:"rejected"})}),[s]),v=o.a.useCallback((function(){return s(n.current)}),[s]),h=o.a.useCallback((function(t){if(!t||!t.then)throw new Error("The argument passed to useAsync().run must be a promise. Maybe a function that's passed isn't returning anything?");return s({status:"pending"}),t.then((function(t){return l(t),t}),(function(t){return d(t),t}))}),[s,l,d]);return{isIdle:"idle"===a,isLoading:"pending"===a,isError:"rejected"===a,isSuccess:"resolved"===a,setData:l,setError:d,error:i,status:a,data:c,run:h,reset:v}}var h=e(16),b=o.a.createContext();function g(t){var n=v(),e=n.data,u=n.status,a=n.error,c=n.isLoading,i=n.isIdle,s=n.isError,f=n.isSuccess,p=n.run,m=n.setData;o.a.useLayoutEffect((function(){p(function(){return d.apply(this,arguments)}())}),[p]);var g=o.a.useCallback((function(t){l.l(t).then((function(t){return m({user:t})}))}),[m]),y=o.a.useCallback((function(t){return l.n(t).then((function(t){return m({user:t})}))}),[m]),j=o.a.useCallback((function(){l.m(),m(null)}),[m]),w=null===e||void 0===e?void 0:e.user,O=o.a.useMemo((function(){return{user:w,login:g,logout:j,register:y}}),[g,j,y,w]);if(c||i)return Object(r.d)(h.c,null);if(s)return Object(r.d)(h.b,{error:a});if(f)return Object(r.d)(b.Provider,Object.assign({value:O},t));throw new Error("Unhandled status: ".concat(u))}function y(){var t=o.a.useContext(b);if(void 0===t)throw new Error("useAuth must be used within a AuthProvider");return t}b.displayName="AuthContext"},48:function(t,n,e){t.exports=e(64)},64:function(t,n,e){"use strict";e.r(n);var r=e(0),u=e.n(r),o=e(20),a=e.n(o),c=(e(53),e(18)),i=e(16),s=u.a.lazy((function(){return Promise.all([e.e(2),e.e(5)]).then(e.bind(null,196))})),l=u.a.lazy((function(){return e.e(4).then(e.bind(null,197))}));function d(){Object(r.useEffect)((function(){setTimeout((function(){window.$("#side-menu").metisMenu()}),1e3)}),[]);var t=Object(c.b)().user;return u.a.createElement(u.a.Suspense,{fallback:u.a.createElement(i.c,null)},t?u.a.createElement(s,null):u.a.createElement(l,null))}var f=e(13),p={useErrorBoundary:!0,refetchAllOnWindowFocus:!1};function m(t){var n=t.children;return u.a.createElement(f.a,{config:p},u.a.createElement(c.a,null,n))}a.a.render(u.a.createElement(m,null,u.a.createElement(d,null)),document.getElementById("root"))}},[[48,1,3]]]);
//# sourceMappingURL=main.bb666090.chunk.js.map